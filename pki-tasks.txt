
playbook: ansible/pki-playbook.yml

  play #1 (safe-guard against race condition):	TAGS: []
    wait for the node to be ready	TAGS: [bootstrap]

  play #2 (install Dogtag PKI CA):	TAGS: []
    Check default route	TAGS: [bootstrap]
    Create some default route	TAGS: [bootstrap]
    Check NM_CONTROLLED in /etc/sysconfig/network-scripts/ifcfg-eth0	TAGS: [bootstrap]
    raw sed -i 's/NM_CONTROLLED.*//g' /etc/sysconfig/network-scripts/ifcfg-eth0	TAGS: [bootstrap]
    Check nameserver in /etc/resolv.conf	TAGS: [bootstrap]
    Restart NetworkManager	TAGS: [bootstrap]
    Check for dnf command	TAGS: [bootstrap, package-install]
    Auto select fastest DNF mirror	TAGS: [bootstrap, package-install]
    Refresh dnf cache	TAGS: [bootstrap, network, package-install]
    Install python2 and deps for ansible modules	TAGS: [bootstrap, network, package-install]
    Gather facts	TAGS: [bootstrap]
    Dump ssh-config	TAGS: [bootstrap]
    Dummy (for ansible.skip_tags)	TAGS: [dummy]
    DNF or YUM?	TAGS: [common]
    Default facts (enable_packages, enable_network)	TAGS: [common]
    Override enable_packages=true	TAGS: [common, package-install]
    Override enable_network=true	TAGS: [common, network]
    Get nmcli device info	TAGS: [common]
    Set nmcli device info fact	TAGS: [common]
    fix /etc/hosts	TAGS: [common]
    Set FQDN hostname	TAGS: [common]
    Get timedatectl information	TAGS: [common]
    Set timezone to UTC	TAGS: [common]
    Disable dnf repos to prevent network access	TAGS: [common]
    Enable dnf repos	TAGS: [common]
    Auto select fastest DNF mirror	TAGS: [common, package-install]
    Enable yum for Fedora	TAGS: [common, network, package-install]
    Disable yum repos to prevent network access	TAGS: [common]
    Enable yum repos	TAGS: [common]
    Auto-select fastest yum mirror	TAGS: [common, network, package-install]
    Install gpg command for COPR / rpm_key	TAGS: [common, network, package-copr, package-install]
    Add GPG for FreeIPA 4.3 COPR	TAGS: [common, network, package-copr, package-install]
    Enable FreeIPA 4.3 COPR	TAGS: [common, network, package-copr, package-install]
    upgrade all packages	TAGS: [common, network, package-install, package-upgrade]
    Create directory for custom RPMS	TAGS: [common, custom-rpms]
    Synchronize RPMs	TAGS: [common, custom-rpms]
    find custom RPMs	TAGS: [common, custom-rpms]
    install custom RPMs	TAGS: [common, custom-rpms]
    install selinux tools	TAGS: [common, network, package-install]
    disable selinux for 389-DS installation	TAGS: [common, lxc]
    install firewalld	TAGS: [firewall, network, package-install, pki]
    check for firewalld	TAGS: [common, firewall]
    Enable and start firewalld	TAGS: [common, firewall]
    Open firewall ports elemental services	TAGS: [common, firewall]
    Install rng tools	TAGS: [common, network, package-install]
    Start the rngd service	TAGS: [common]
    tty-less sudo	TAGS: [common]
    install 389-DS LDAP server	TAGS: [389ds, network, package-install]
    create 389-DS instance	TAGS: [389ds]
    install pki-server packages and dependencies	TAGS: [network, package-install, pki]
    Open Firewall for services	TAGS: [firewall, pki]
    Open Firewall for ports	TAGS: [firewall, pki]
    install pki-ca package	TAGS: [network, package-install, pkica]
    Write CA config template	TAGS: [pkica]
    create CA	TAGS: [ipa-install, pkica]
    check for tomcat memory limit	TAGS: [pki, pki-install]
    limit tomcat memory	TAGS: [ipa-install, pki]
    restart tomcat	TAGS: [pki, pki-install]
    wait for tomcat	TAGS: [pki, pki-install]
    dump admin PKCS12 file to PEM file	TAGS: [pki, pki-install]
    fetch admin cert as /tmp/{{pki_instance_name}}_admin.pem	TAGS: [pki, pki-install]
    install pki-kra package	TAGS: [network, package-install, pkikra]
    Write KRA config template	TAGS: [pkikra]
    create KRA	TAGS: [ipa-install, pkikra]
    check for tomcat memory limit	TAGS: [pki, pki-install]
    limit tomcat memory	TAGS: [ipa-install, pki]
    restart tomcat	TAGS: [pki, pki-install]
    wait for tomcat	TAGS: [pki, pki-install]
    dump admin PKCS12 file to PEM file	TAGS: [pki, pki-install]
    fetch admin cert as /tmp/{{pki_instance_name}}_admin.pem	TAGS: [pki, pki-install]

